网页包含了大量的文字，浏览器必须知道这些文字的编码方法，才能把文字还原出来。

一般情况下，服务器向浏览器发送 HTML 网页文件时，会通过 HTTP 头信息，声明网页的编码方式。

```http
Content-Type: text/html; charset=UTF-8
```

网页内部也会再用<meta>标签，再次声明网页的编码。

# 一、字符的数字表示法

每个字符有一个 Unicode 号码，称为码点（code point）。如果知道码点，就能查到这是什么字符。举例来说，英文字母a的码点是十进制的97（十六进制的61），汉字“中”的码点是十进制的20013（十六进制的4e2d）。

网页可以使用不同语言的编码方式，最常用的编码是 UTF-8。

不是每一个 Unicode 字符都能直接在 HTML 语言里面显示。

HTML 为了解决上面这些问题，允许使用 Unicode 码点表示字符，浏览器会自动将码点转成对应的字符。

字符的码点表示法是&#N;（十进制，N代表码点）或者&#xN;（十六进制，N代表码点），比如，字符a可以写成&#97;（十进制）或者&#x61;（十六进制），字符中可以写成&#20013;（十进制）或者&#x4e2d;（十六进制），浏览器会自动转换它们。

```html
<p>hello</p>
<!-- 等同于 -->
<p>&#104;&#101;&#108;&#108;&#111;</p>
<!-- 等同于 -->
<p>&#x68;&#x65;&#x6c;&#x6c;&#x6f;</p>
```

# 二、字符的实体表示法

数字表示法的不方便之处，在于必须知道每个字符的码点，很难记忆。为了能够快速输入，HTML 为一些特殊字符，规定了容易记忆的名字，允许通过名字来表示它们，这称为实体表示法（entity）。

实体的写法是&name;，其中的name是字符的名字。

- <：&lt;
- \>：&gt;
- "：&quot;
- '：&apos;
- &：&amp;
- ©：&copy;
- \#：&num;
- §：&sect;
- ¥：&yen;
- $：&dollar;
- £：&pound;
- ¢：&cent;
- %：&percnt;
- *：$ast;
- @：&commat;
- ^：&Hat;
- ±：&plusmn;
- 空格：&nbsp;

# 三、关于常见的几种编码

## AscII

最早计算机在设计时采用8bit（俗称八位二进制）作为一个字节（byte），所以一个字节能标识的最大整数就是255「11111111(B) = 255」，0-255被用来标识大小写英文字母、数字和一些符号，这个编码表就被称为ASCII编码。

浏览器地址栏使用的就是ascll码。

英语用128个符号编码就够了，但是用来表示其他语言，128个符号是不够的。比如，在法语中，字母上方有注音符号，它就无法用 ASCII 码表示。于是，一些欧洲国家就决定，利用字节中闲置的最高位编入新的符号。比如，法语中的é的编码为130（二进制10000010）。这样一来，这些欧洲国家使用的编码体系，可以表示最多256个符号。

不同的国家有不同的字母，但是不管怎样，所有这些编码方式中，0--127表示的符号是一样的，不一样的只是128--255的这一段。

### ascll码对照表

[参考](https://blog.csdn.net/hhy321/article/details/124537526)

[UTF-8](https://max.book118.com/html/2021/1118/6120053214004052.shtm)

![img](./../images/1661418473796-89ecfb41-60b5-4381-9c5f-99e20166d9e1-1675739655005-39.webp)

## Unicode

Unicode源于一个很简单的想法：**将全世界所有的字符包含在一个集合里，计算机只要支持这一个字符集，就能显示所有的字符，再也不会有乱码了。**

Unicode 当然是一个很大的集合，现在的规模可以容纳100多万个符号。每个符号的编码都不一样，比如，U+0639表示阿拉伯字母Ain，U+0041表示英语的大写字母A，U+4E25表示汉字严。具体的符号对应表，可以查询[unicode.org](https://www.unicode.org/)，或者专门的[汉字对应表](http://www.chi2ko.com/tool/CJK.htm)

### Unicode编码规则

**它从0开始，为每个符号指定一个编号，这叫做"码点"（code point）。** 比如，null的码点是0（表示所有二进制位都是0）。

```html
U+0000 = null
```

U+表示紧跟在后面的十六进制数是Unicode的码点。

Unicode仅仅是一个符号集，只规定了二进制代码，但是没有规定如何存储，因此出现了Unicode多种存储方式，广泛应用的就是utf-8。

### UTF-32

**最直观的编码方法是，每个码点使用四个字节表示，字节内容一一对应码点。这种编码方法就叫做UTF-32。**

比如马的 Unicode 为：U+9A6C，那么直接转化为二进制，它的表示就为：1001 1010 0110 1100。

UTF-32的优点在于，转换规则简单直观，查找效率高。缺点在于浪费空间，同样内容的英语文本，它会比ASCII编码大四倍。这个缺点很致命，导致实际上没有人使用这种编码方法，HTML 5标准就明文规定，网页不得编码成UTF-32。

### UTF-8

人们真正需要的是一种节省空间的编码方法，这导致了UTF-8的诞生。**UTF-8是一种变长的编码方法，字符长度从1个字节到4个字节不等。**

越是常用的字符，字节越短，最前面的128个字符，只使用1个字节表示，与ASCII码完全相同。

#### UTF-8编码规则

① 对于**单字节**的符号，字节的第一位设为 0，后面的7位为这个符号的 Unicode 码，因此对于英文字母，UTF-8 编码和 ASCII 码是相同的。

② 对于**n字节**的符号 **（n>1）**,第一个字节的前 n 位都设为 1，第 n+1 位设为 0，后面字节的前两位一律设为 10，剩下的没有提及的二进制位，全部为这个符号的 Unicode 码 。

**Unicode 编号范围**与**对应的 UTF-8 二进制格式**

| 编号范围（对应十进制数）        | 二进制格式                          |
| ------------------------------- | ----------------------------------- |
| 0x00 ~ 0x7F（0-127）            | 0xxxxxxx                            |
| 0x80 ~ 0x7FF（128~2047）        | 110xxxxx 10xxxxxx                   |
| 0x800 ~ 0XFFFF（2048~65535）    | 1110xxxx 10xxxxxx 10xxxxxx          |
| 0x10000 ~ 0x10FFFF（65536以上） | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx |

如何对一个具体的Unicode编号进行UTF8编码？

首先找到该 Unicode 编号所在的编号范围，进而可以找到与之对应的二进制格式，然后将该 Unicode 编号转化为二进制数（去掉高位的 0），最后将该二进制数从右向左依次填入二进制格式的 X 中，如果还有 X 未填，则设为 0 。

比如汉字“张”，其对应的十进制数为24352，在第三个范围内，那么，其二进制格式为

`1110xxxxx 10xxxxxx 10xxxxxx`，将24352转换成Unicode码（其实就是十进制转16进制）为`0x5F20`，转化为二进制为`0101 1111 0010 0000`，将其从右往左填入，得到结果为11100101 10111100 10100000。

### GBK、GB2312

GB2312，由中华人民共和国政府制定的，简体汉字编码规范，大陆所有计算机中的简体中文，都使用此种编码格式。与此对应的还有BIG5，是中华民国政府制定的，繁体汉字的编码规范，一般应用于海外计算机的繁体中文显示。所谓的繁体中文Windows，简体中文Windows，指的就是采用BIG5和GB2312编码格式的操作系统。这两种编码方式不兼容，如果使用一种编码的文本阅读器来读另一种编码的文本，就会出现乱码。比如在简体中文Windows上读BIG5编码的文件，就是乱码，反之亦然。使用简体浏览器浏览的时候，到了繁体中文网站，如果不改变码制，也是乱码。   



GBK，又称GBK大字符集，简而言之就是将所有亚洲文字的双字节字符，包括简体中文，繁体中文，日语，韩语等，都使用一种格式编码，兼容所有平台的上的语言。GBK大字符集包含的汉字数量比GB2312和BIG5多，使得汉字兼容足够使用。   